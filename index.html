<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://p.trellocdn.com/power-up.min.css">
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
</head>
<body>
    <script>
        var REPORT_ICON = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMgM1YyMUgyMVYzSDNaTTE5IDE5SDVWNUgxOVYxOVoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPgo8cGF0aCBkPSJNNyA3SDE3VjlIN1Y3WiIgZmlsbD0iY3VycmVudENvbG9yIi8+CjxwYXRoIGQ9Ik03IDExSDE3VjEzSDdWMTFaIiBmaWxsPSJjdXJyZW50Q29sb3IiLz4KPHBhdGggZD0iTTcgMTVIMTdWMTdIN1YxNVoiIGZpbGw9ImN1cnJlbnRDb2xvciIvPgo8L3N2Zz4K';

        // Wait for TrelloPowerUp to be available
        var initializePowerUp = function() {
            if (typeof window.TrelloPowerUp === 'undefined') {
                setTimeout(initializePowerUp, 100);
                return;
            }

            try {
                window.TrelloPowerUp.initialize({
                    'board-buttons': function(t, options) {
                        return [{
                            icon: {
                                dark: REPORT_ICON,
                                light: REPORT_ICON
                            },
                            text: 'Advanced Reports',
                            callback: function(t) {
                                // Use a relative URL to avoid cross-origin issues
                                return t.modal({
                                    url: './report-dashboard.html',
                                    title: 'Advanced Board Reports',
                                    height: 900,
                                    width: 1200
                                });
                            }
                        }];
                    }
                });
                console.log('Power-Up initialized successfully');
            } catch (error) {
                console.error('Error initializing Power-Up:', error);
            }
        };

        // Start initialization when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializePowerUp);
        } else {
            initializePowerUp();
        }
    </script>
</body>
</html> 